# æ–°é—»èšåˆåˆ†æç³»ç»Ÿ (News Aggregator System)

ä¸€ä¸ªå…¨é¢çš„æ–°é—»èšåˆä¸æ™ºèƒ½åˆ†æç³»ç»Ÿï¼Œæ•´åˆå¤šæ•°æ®æºé‡‡é›†ã€LLMå†…å®¹åˆ†æã€è¶‹åŠ¿è¯†åˆ«å’ŒæŠ¥å‘Šç”Ÿæˆã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š å¤šæºæ•°æ®é‡‡é›†
- **HackerNews**: æŠ€æœ¯ç¤¾åŒºçƒ­ç‚¹ (Official API + Algolia Search)
- **RSSè®¢é˜…**: 20+ç§‘æŠ€åª’ä½“æº (TechCrunch, The Verge, Wired, arXivç­‰)
- **æ–°æµªè´¢ç»ç›´æ’­**: 7x24å°æ—¶é‡‘èæ–°é—» (9ä¸ªé¢‘é“)

### ğŸ¤– æ™ºèƒ½åˆ†æ
- **å†…å®¹åˆ†ç±»**: 14ä¸ªç±»åˆ«è‡ªåŠ¨åˆ†ç±» (AI/ML, äº‘è®¡ç®—, å®‰å…¨ç­‰)
- **é‡è¦æ€§è¯„ä¼°**: 5çº§é‡è¦æ€§è¯„åˆ†
- **5W2Hä¿¡æ¯æŠ½å–**: ç»“æ„åŒ–ä¿¡æ¯æå–
- **è¶‹åŠ¿åˆ†æ**: çƒ­ç‚¹è¯é¢˜ã€æ–°å…´è¶‹åŠ¿è¯†åˆ«

### ğŸ“ æŠ¥å‘Šç”Ÿæˆ
- **MarkdownæŠ¥å‘Š**: å®Œæ•´åˆ†ææŠ¥å‘Š
- **JSONæ•°æ®**: ç»“æ„åŒ–æ•°æ®å¯¼å‡º
- **HTMLæŠ¥å‘Š**: å¯è§†åŒ–ç½‘é¡µæŠ¥å‘Š

## ç³»ç»Ÿæ¶æ„

```

â”œâ”€â”€ main.py                 # ä¸»å…¥å£/æµæ°´çº¿ç¼–æ’
â”œâ”€â”€ requirements.txt        # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ settings.py         # ç³»ç»Ÿé…ç½®
â”œâ”€â”€ collectors/             # æ•°æ®é‡‡é›†æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ hackernews_collector.py
â”‚   â”œâ”€â”€ rss_collector.py
â”‚   â””â”€â”€ sina_zhibo_collector.py
â”œâ”€â”€ extractors/             # å†…å®¹æŠ½å–æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ content_extractor.py
â”œâ”€â”€ analyzers/              # åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ classifier.py       # å†…å®¹åˆ†ç±»
â”‚   â”œâ”€â”€ extractor.py        # 5W2HæŠ½å–
â”‚   â”œâ”€â”€ trend_analyzer.py   # è¶‹åŠ¿åˆ†æ
â”‚   â””â”€â”€ report_generator.py # æŠ¥å‘Šç”Ÿæˆ
â”œâ”€â”€ prompts/                # LLMæç¤ºè¯
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ llm_prompts.py
â”œâ”€â”€ utils/                  # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ ollama_client.py    # Ollamaå®¢æˆ·ç«¯
â”‚   â””â”€â”€ file_utils.py       # æ–‡ä»¶å·¥å…·
â”œâ”€â”€ reports/                # APIç ”ç©¶æ–‡æ¡£
â”œâ”€â”€ outputs/                # ç”Ÿæˆçš„æŠ¥å‘Š
â”œâ”€â”€ cache/                  # ç¼“å­˜æ•°æ®
â””â”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶
```

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…Ollama (å¯é€‰ï¼Œç”¨äºLLMåˆ†æ)
curl -fsSL https://ollama.com/install.sh | sh

# æ‹‰å–æ¨¡å‹
ollama pull qwen2.5:0.5b  # åˆ†ç±»æ¨¡å‹
ollama pull qwen3:4b    # æŠ½å–æ¨¡å‹
```

### 2. è¿è¡Œç³»ç»Ÿ

```bash
# å®Œæ•´æµæ°´çº¿
python main.py

# ä»…é‡‡é›†æ•°æ®
python main.py --collect-only

# ä½¿ç”¨ç¼“å­˜æ•°æ®åˆ†æ
python main.py --analyze-only

# æŒ‡å®šæ•°æ®æº
python main.py --sources hn,rss

# ç¦ç”¨LLMï¼ˆä½¿ç”¨è§„åˆ™åˆ†ç±»ï¼‰
python main.py --no-llm

# è°ƒè¯•æ¨¡å¼
python main.py --debug
```

### 3. å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--collect-only` | ä»…é‡‡é›†æ•°æ® | - |
| `--analyze-only` | ä»…åˆ†æï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰ | - |
| `--sources` | æ•°æ®æº (hn,rss,sina) | all |
| `--no-llm` | ç¦ç”¨LLMåˆ†æ | - |
| `--formats` | æŠ¥å‘Šæ ¼å¼ | markdown,json |
| `--output-dir` | è¾“å‡ºç›®å½• | outputs/ |
| `--debug` | è°ƒè¯•æ¨¡å¼ | - |

## é…ç½®è¯´æ˜

### å†…å®¹ç±»åˆ« (ContentCategory)

| ç±»åˆ« | è¯´æ˜ |
|------|------|
| ai_ml | äººå·¥æ™ºèƒ½/æœºå™¨å­¦ä¹  |
| programming | ç¼–ç¨‹å¼€å‘ |
| cloud_infra | äº‘è®¡ç®—/åŸºç¡€è®¾æ–½ |
| security | ç½‘ç»œå®‰å…¨ |
| data_science | æ•°æ®ç§‘å­¦ |
| blockchain | åŒºå—é“¾/åŠ å¯†è´§å¸ |
| hardware | ç¡¬ä»¶/èŠ¯ç‰‡ |
| startup | åˆ›ä¸š/èèµ„ |
| big_tech | å¤§å‚åŠ¨æ€ |
| market | å¸‚åœº/è‚¡ç¥¨ |
| policy | æ”¿ç­–/ç›‘ç®¡ |
| research | å­¦æœ¯ç ”ç©¶ |
| product | äº§å“å‘å¸ƒ |
| other | å…¶ä»– |

### é‡è¦æ€§ç­‰çº§

| ç­‰çº§ | æ ‡ç­¾ | è¯´æ˜ |
|------|------|------|
| 5 | å…³é”® | çªç ´æ€§è¿›å±•/é‡å¤§æ”¿ç­– |
| 4 | é‡è¦ | è¡Œä¸šé‡å¤§æ–°é—» |
| 3 | ä¸­ç­‰ | å€¼å¾—å…³æ³¨ |
| 2 | ä¸€èˆ¬ | å¸¸è§„ä¿¡æ¯ |
| 1 | è¾¹ç¼˜ | è¾¹ç¼˜å†…å®¹ |

### LLMæ¨¡å‹é…ç½®

```python
# config/settings.py
class LLMSettings:
    CLASSIFIER_MODEL = "qwen2.5:0.5b"  # åˆ†ç±»æ¨¡å‹ï¼ˆå¿«é€Ÿï¼‰
    EXTRACTOR_MODEL = "qwen3:4b"     # æŠ½å–æ¨¡å‹ï¼ˆæ·±åº¦ï¼‰
    
    CLASSIFIER_TEMPERATURE = 0.1       # ä½æ¸©åº¦ï¼Œç¨³å®šè¾“å‡º
    EXTRACTOR_TEMPERATURE = 0.3        # ç•¥é«˜ï¼Œå…è®¸åˆ›é€ æ€§
```

## APIå‚è€ƒ

### æ•°æ®æºAPI

#### HackerNews
- Official API: `https://hacker-news.firebaseio.com/v0/`
- Algolia API: `https://hn.algolia.com/api/v1/`
- æ— éœ€è®¤è¯ï¼Œæ— é€Ÿç‡é™åˆ¶

#### RSSæº
- æ”¯æŒRSS 2.0å’ŒAtomæ ¼å¼
- ä½¿ç”¨feedparserè§£æ
- 20+é¢„é…ç½®æº

#### æ–°æµªè´¢ç»ç›´æ’­
- Endpoint: `https://zhibo.sina.com.cn/api/zhibo/feed`
- éœ€è¦Refererå¤´
- JSONPå“åº”æ ¼å¼

## è¾“å‡ºç¤ºä¾‹

### MarkdownæŠ¥å‘Š
```markdown
# æ–°é—»èšåˆåˆ†ææŠ¥å‘Š

**æ—¥æœŸ**: 2024-12-20
**åˆ†ææ–‡ç« æ•°**: 130

## çƒ­ç‚¹è¯é¢˜

| æ’å | è¯é¢˜ | çƒ­åº¦ | æåŠæ¬¡æ•° |
|------|------|------|----------|
| 1 | GPT-5 | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ 95 | 15 |
| 2 | é‡å­è®¡ç®— | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ 80 | 10 |
...
```

### JSONæ•°æ®
```json
{
  "metadata": {
    "date": "2024-12-20",
    "total_articles": 130
  },
  "trend_analysis": {
    "hot_topics": [...],
    "emerging_trends": [...],
    "industry_dynamics": [...]
  },
  "articles": [...]
}
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ•°æ®æº

1. åœ¨`collectors/`åˆ›å»ºæ–°é‡‡é›†å™¨
2. å®ç°`fetch_*`æ–¹æ³•
3. åœ¨`main.py`ä¸­æ³¨å†Œ

### è‡ªå®šä¹‰åˆ†æ

1. åœ¨`prompts/llm_prompts.py`æ·»åŠ æç¤ºè¯
2. åœ¨`analyzers/`åˆ›å»ºåˆ†æå™¨
3. é›†æˆåˆ°æµæ°´çº¿

### æ‰©å±•æŠ¥å‘Šæ ¼å¼

1. åœ¨`ReportGenerator`æ·»åŠ ç”Ÿæˆæ–¹æ³•
2. æ³¨å†Œåˆ°`generate_daily_report`

## æ³¨æ„äº‹é¡¹

1. **OllamaæœåŠ¡**: LLMåˆ†æéœ€è¦è¿è¡ŒOllamaæœåŠ¡
2. **ç½‘ç»œè®¿é—®**: æ•°æ®é‡‡é›†éœ€è¦è®¿é—®å¤–éƒ¨API
3. **å­˜å‚¨ç©ºé—´**: ç¼“å­˜å’Œæ—¥å¿—ä¼šå ç”¨ç£ç›˜ç©ºé—´
4. **APIé™åˆ¶**: éƒ¨åˆ†æºå¯èƒ½æœ‰é€Ÿç‡é™åˆ¶

## è®¸å¯è¯

MIT License

## ä½œè€…

Claude - AI Assistant by Anthropic
